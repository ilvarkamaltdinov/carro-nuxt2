<template>
	<section class="page-main__slider-index slider-index grid__col-8">
		<h2 class="visually-hidden">Слайдер на главной странице</h2>
		<!-- Slider main container-->
		<div class="swiper swiper--progress swiper--index">
			<!-- Additional required wrapper-->
			<div class="swiper-wrapper">
				<!-- Slides-->
				<div class="swiper-slide">
					<div class="slider-index__item">
						<div class="slider-index__media-wrap">
							<div class="slider-index__media">
								<picture>
									<source type="image/webp"
									        media="(min-width: 768px)"
									        srcset="img/slider-index/slider-index-1/slider-index-element-1@1x.webp 1x, img/slider-index/slider-index-1/slider-index-element-1@2x.webp 2x" />
									<source media="(min-width: 768px)"
									        srcset="img/slider-index/slider-index-1/slider-index-element-1@1x.jpg 1x, img/slider-index/slider-index-1/slider-index-element-1@2x.jpg 2x" />
									<source type="image/webp"
									        srcset="img/slider-index/slider-index-1/slider-index-element-1@1x.webp 1x, img/slider-index/slider-index-1/slider-index-element-1@2x.webp 2x" />
									<img class="slider-index__media slider-index__media--element"
									     src="img/slider-index/slider-index-1/slider-index-element-1.png"
									     loading="lazy"
									     alt=""
									     data-aos="fade-up"
									     data-aos-duration="750"
									     data-aos-easing="ease-in-out"
									     data-aos-mirror="true" />
								</picture>
								<picture>
									<source type="image/webp"
									        media="(min-width: 768px)"
									        srcset="img/slider-index/slider-index-1/slider-index-car-1@1x.webp 1x, img/slider-index/slider-index-1/slider-index-car-1@2x.webp 2x" />
									<source media="(min-width: 768px)"
									        srcset="img/slider-index/slider-index-1/slider-index-car-1@1x.jpg 1x, img/slider-index/slider-index-1/slider-index-car-1@2x.jpg 2x" />
									<source type="image/webp"
									        srcset="img/slider-index/slider-index-1/slider-index-car-1@1x.webp 1x, img/slider-index/slider-index-1/slider-index-car-1@2x.webp 2x" />
									<img class="slider-index__media slider-index__media--car"
									     src="img/slider-index/slider-index-1/slider-index-car-1.png"
									     loading="lazy"
									     alt=""
									     data-aos="fade-right"
									     data-aos-duration=" 750"
									     data-aos-easing="ease-in-out"
									     data-aos-mirror="true" />
								</picture>
							</div>
						</div>
						<div class="slider-index__text-wrap">
							<div class="slider-index__circle"
							     data-aos="fade-up-left"
							     data-aos-duration="750"
							     data-aos-easing="ease-in-out"
							     data-aos-mirror="true"></div>
							<div class="slider-index__text">
								<div class="slider-index__heading">Рассрочка 0% от Совкомбанка</div>
								<div class="slider-index__content">Успей купить авто на выгодных условиях</div>
							</div>
						</div>
					</div>
				</div>
				<div class="swiper-slide">
					<div class="slider-index__item">
						<div class="slider-index__media-wrap">
							<div class="slider-index__media">
								<picture>
									<source type="image/webp"
									        media="(min-width: 768px)"
									        srcset="img/slider-index/slider-index-1/slider-index-element-1@1x.webp 1x, img/slider-index/slider-index-1/slider-index-element-1@2x.webp 2x" />
									<source media="(min-width: 768px)"
									        srcset="img/slider-index/slider-index-1/slider-index-element-1@1x.jpg 1x, img/slider-index/slider-index-1/slider-index-element-1@2x.jpg 2x" />
									<source type="image/webp"
									        srcset="img/slider-index/slider-index-1/slider-index-element-1@1x.webp 1x, img/slider-index/slider-index-1/slider-index-element-1@2x.webp 2x" />
									<img class="slider-index__media slider-index__media--element"
									     src="img/slider-index/slider-index-1/slider-index-element-1.png"
									     loading="lazy"
									     alt=""
									     data-aos="fade-up"
									     data-aos-duration="750"
									     data-aos-easing="ease-in-out"
									     data-aos-mirror="true" />
								</picture>
								<picture>
									<source type="image/webp"
									        media="(min-width: 768px)"
									        srcset="img/slider-index/slider-index-1/slider-index-car-1@1x.webp 1x, img/slider-index/slider-index-1/slider-index-car-1@2x.webp 2x" />
									<source media="(min-width: 768px)"
									        srcset="img/slider-index/slider-index-1/slider-index-car-1@1x.jpg 1x, img/slider-index/slider-index-1/slider-index-car-1@2x.jpg 2x" />
									<source type="image/webp"
									        srcset="img/slider-index/slider-index-1/slider-index-car-1@1x.webp 1x, img/slider-index/slider-index-1/slider-index-car-1@2x.webp 2x" />
									<img class="slider-index__media slider-index__media--car"
									     src="img/slider-index/slider-index-1/slider-index-car-1.png"
									     loading="lazy"
									     alt=""
									     data-aos="fade-right"
									     data-aos-duration="750"
									     data-aos-easing="ease-in-out"
									     data-aos-mirror="true" />
								</picture>
							</div>
						</div>
						<div class="slider-index__text-wrap">
							<div class="slider-index__circle"
							     data-aos="fade-up-left"
							     data-aos-duration="750"
							     data-aos-easing="ease-in-out"
							     data-aos-mirror="true"></div>
							<div class="slider-index__text">
								<div class="slider-index__heading">Рассрочка 0% от Совкомбанка</div>
								<div class="slider-index__content">Успей купить авто на выгодных условиях</div>
							</div>
						</div>
					</div>
				</div>
				<div class="swiper-slide">
					<div class="slider-index__item">
						<div class="slider-index__media-wrap">
							<div class="slider-index__media">
								<picture>
									<source type="image/webp"
									        media="(min-width: 768px)"
									        srcset="img/slider-index/slider-index-1/slider-index-element-1@1x.webp 1x, img/slider-index/slider-index-1/slider-index-element-1@2x.webp 2x" />
									<source media="(min-width: 768px)"
									        srcset="img/slider-index/slider-index-1/slider-index-element-1@1x.jpg 1x, img/slider-index/slider-index-1/slider-index-element-1@2x.jpg 2x" />
									<source type="image/webp"
									        srcset="img/slider-index/slider-index-1/slider-index-element-1@1x.webp 1x, img/slider-index/slider-index-1/slider-index-element-1@2x.webp 2x" />
									<img class="slider-index__media slider-index__media--element"
									     src="img/slider-index/slider-index-1/slider-index-element-1.png"
									     loading="lazy"
									     alt=""
									     data-aos="fade-up"
									     data-aos-duration="750"
									     data-aos-easing="ease-in-out"
									     data-aos-mirror="true" />
								</picture>
								<picture>
									<source type="image/webp"
									        media="(min-width: 768px)"
									        srcset="img/slider-index/slider-index-1/slider-index-car-1@1x.webp 1x, img/slider-index/slider-index-1/slider-index-car-1@2x.webp 2x" />
									<source media="(min-width: 768px)"
									        srcset="img/slider-index/slider-index-1/slider-index-car-1@1x.jpg 1x, img/slider-index/slider-index-1/slider-index-car-1@2x.jpg 2x" />
									<source type="image/webp"
									        srcset="img/slider-index/slider-index-1/slider-index-car-1@1x.webp 1x, img/slider-index/slider-index-1/slider-index-car-1@2x.webp 2x" />
									<img class="slider-index__media slider-index__media--car"
									     src="img/slider-index/slider-index-1/slider-index-car-1.png"
									     loading="lazy"
									     alt=""
									     data-aos="fade-right"
									     data-aos-duration="750"
									     data-aos-easing="ease-in-out"
									     data-aos-mirror="true" />
								</picture>
							</div>
						</div>
						<div class="slider-index__text-wrap">
							<div class="slider-index__circle"
							     data-aos="fade-up-left"
							     data-aos-duration="750"
							     data-aos-easing="ease-in-out"
							     data-aos-mirror="true"></div>
							<div class="slider-index__text">
								<div class="slider-index__heading">Рассрочка 0% от Совкомбанка</div>
								<div class="slider-index__content">Успей купить авто на выгодных условиях</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!-- If we need pagination-->
			<div class="swiper-pagination"></div>
			<!-- If we need navigation buttons-->
			<div class="swiper-button-prev"></div>
			<div class="swiper-button-next"></div>
			<!-- If we need scrollbar-->
			<div class="swiper-scrollbar"></div>
		</div>
	</section>
</template>
<script>
import AOS from 'aos'
import 'aos/dist/aos.css'

export default {
	mounted() {
		const sliderIndexSwiper = new swiper.default('.slider-index .swiper', {
			modules: [swiper.Navigation, swiper.Pagination, swiper.Autoplay],
			loop: true,
			autoplayDisableOnInteraction: false,
			autoplay: false,
			slidesPerView: 1,
			autoHeight: true,
			watchSlidesProgress: true,
			scrollbar: false,
			on: {
				sliderMove: function () {
					document.querySelectorAll('.swiper-slide-next .slider-index__media').forEach((val) => {
						val.style.display = 'none'
						val.classList.remove("aos-init", "aos-animate");
						val.style.display = 'block'
					})
					document.querySelectorAll('.swiper-slide-next .slider-index__circle').forEach((val) => {
						val.style.display = 'none'
						val.classList.remove("aos-init", "aos-animate");
						val.style.display = 'block'
					})
					AOS.init({
						once: true
					})
				},
				slideChangeTransitionStart: function () {
					let slides = document.querySelectorAll('.swiper-slide-active .slider-index__media')
					slides.forEach((val) => {
						// val.style.display = 'none'
						val.classList.remove("aos-init");
						//console.log(1111, val)
						// val.style.display = 'block'
						// console.log(2222, val.classList)
					})
					document.querySelectorAll('.swiper-slide-next .slider-index__circle').forEach((val) => {
						//console.log(33333, val.classList)
						// val.style.display = 'none'
						// val.classList.remove("aos-init");
						// val.style.display = 'block'
						// console.log(44444, val.classList)
					})
					AOS.init({
						once: true
					})
				},
			},
			pagination: {
				el: '.swiper-pagination',
				clickable: 'true',
				type: 'bullets',
				renderBullet: function (index, className) {
					return '<span class="' + className + '">' + '<span class="swiper-pagination-bar"></span>' + '<span class="swiper-pagination-progress"></span>' + '</span>';
				},
			},
			navigation: {
				nextEl: '.swiper-button-next',
				prevEl: '.swiper-button-prev',
			},
		})
		//console.log(555555, 'aos is initing')
		AOS.init({
			once: true
		})
	}
}
</script>